<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÌÜµÌï© ÏÑ§Ï†ï - AutoTrade Pro v4.0</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --primary-color: #667eea;
            --primary-dark: #5568d3;
            --success-color: #00c853;
            --danger-color: #d32f2f;
            --warning-color: #ffa726;
            --bg-color: #f5f5f7;
            --card-bg: #ffffff;
            --text-color: #333;
            --border-color: #e0e0e0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background: var(--bg-color);
            color: var(--text-color);
            padding: 20px;
        }

        /* Îã§ÌÅ¨ Î™®Îìú */
        body.dark-mode {
            --bg-color: #1a1a1a;
            --card-bg: #2d2d2d;
            --text-color: #e0e0e0;
            --border-color: #404040;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            font-size: 28px;
            font-weight: 600;
        }

        .theme-toggle {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .theme-toggle:hover {
            background: rgba(255,255,255,0.3);
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            overflow-x: auto;
            padding-bottom: 5px;
        }

        .tab {
            padding: 12px 24px;
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .tab:hover {
            border-color: var(--primary-color);
        }

        .tab.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .settings-panel {
            display: none;
        }

        .settings-panel.active {
            display: block;
        }

        .settings-section {
            background: var(--card-bg);
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .section-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--border-color);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 8px;
            color: var(--text-color);
        }

        .form-label small {
            color: #999;
            font-weight: 400;
        }

        .form-input,
        .form-select {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 14px;
            background: var(--card-bg);
            color: var(--text-color);
            transition: all 0.3s;
        }

        .form-input:focus,
        .form-select:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .form-checkbox {
            width: 20px;
            height: 20px;
            margin-right: 10px;
            cursor: pointer;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
        }

        .btn-success {
            background: var(--success-color);
            color: white;
        }

        .btn-danger {
            background: var(--danger-color);
            color: white;
        }

        .btn-group {
            display: flex;
            gap: 10px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }

        .alert.show {
            display: block;
        }

        .alert-success {
            background: #e8f5e9;
            color: #2e7d32;
            border-left: 4px solid var(--success-color);
        }

        .alert-danger {
            background: #ffebee;
            color: #c62828;
            border-left: 4px solid var(--danger-color);
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .header {
                flex-direction: column;
                text-align: center;
                gap: 15px;
            }

            .grid-2 {
                grid-template-columns: 1fr;
            }

            .tabs {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div>
                <h1>‚öôÔ∏è ÌÜµÌï© ÏÑ§Ï†ï</h1>
                <p style="margin-top: 5px; opacity: 0.9;">Î™®Îì† Í∏∞Îä•ÏùÑ Ìïú Í≥≥ÏóêÏÑú Í¥ÄÎ¶¨</p>
            </div>
            <button class="theme-toggle" onclick="toggleTheme()">üåô Îã§ÌÅ¨ Î™®Îìú</button>
        </div>

        <div class="alert alert-success" id="success-alert">
            <strong>‚úÖ ÏÑ±Í≥µ!</strong> ÏÑ§Ï†ïÏù¥ Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§.
        </div>

        <div class="alert alert-danger" id="error-alert">
            <strong>‚ùå Ïò§Î•ò!</strong> <span id="error-message"></span>
        </div>

        <div class="tabs">
            <div class="tab active" onclick="switchTab('system')">ÏãúÏä§ÌÖú</div>
            <div class="tab" onclick="switchTab('risk')">Î¶¨Ïä§ÌÅ¨ Í¥ÄÎ¶¨</div>
            <div class="tab" onclick="switchTab('strategies')">Ï†ÑÎûµ ÏÑ§Ï†ï</div>
            <div class="tab" onclick="switchTab('ai')">AI Î∂ÑÏÑù</div>
            <div class="tab" onclick="switchTab('backtest')">Î∞±ÌÖåÏä§ÌåÖ</div>
            <div class="tab" onclick="switchTab('notification')">ÏïåÎ¶º</div>
            <div class="tab" onclick="switchTab('ui')">UI ÏÑ§Ï†ï</div>
        </div>

        <!-- ÏãúÏä§ÌÖú ÏÑ§Ï†ï -->
        <div id="panel-system" class="settings-panel active">
            <div class="settings-section">
                <div class="section-title">ÏãúÏä§ÌÖú ÏÑ§Ï†ï</div>
                <div class="grid-2">
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="trading_enabled">
                            Îß§Îß§ Í∏∞Îä• ÌôúÏÑ±Ìôî
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="test_mode">
                            ÌÖåÏä§Ìä∏ Î™®Îìú
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Î°úÍ∑∏ Î†àÎ≤®</label>
                        <select class="form-select" id="logging_level">
                            <option value="DEBUG">DEBUG</option>
                            <option value="INFO" selected>INFO</option>
                            <option value="WARNING">WARNING</option>
                            <option value="ERROR">ERROR</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ÏµúÎåÄ ÎèôÏãú AI Î∂ÑÏÑù Ïàò</label>
                        <input type="number" class="form-input" id="max_concurrent_analysis" value="3" min="1" max="10">
                    </div>
                </div>
            </div>
        </div>

        <!-- Î¶¨Ïä§ÌÅ¨ Í¥ÄÎ¶¨ ÏÑ§Ï†ï -->
        <div id="panel-risk" class="settings-panel">
            <div class="settings-section">
                <div class="section-title">Î¶¨Ïä§ÌÅ¨ Í¥ÄÎ¶¨</div>
                <div class="grid-2">
                    <div class="form-group">
                        <label class="form-label">ÏµúÎåÄ Ìè¨ÏßÄÏÖò ÌÅ¨Í∏∞ (%)</label>
                        <input type="number" class="form-input" id="max_position_size" value="30" step="1">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ÏùºÏùº ÏµúÎåÄ ÏÜêÏã§ (%)</label>
                        <input type="number" class="form-input" id="max_daily_loss" value="3" step="0.5">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Í∏∞Î≥∏ ÏÜêÏ†à ÎπÑÏú® (%)</label>
                        <input type="number" class="form-input" id="stop_loss_rate" value="5" step="0.5">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Í∏∞Î≥∏ ÏùµÏ†à ÎπÑÏú® (%)</label>
                        <input type="number" class="form-input" id="take_profit_rate" value="10" step="0.5">
                    </div>
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="enable_trailing_stop" checked>
                            Trailing Stop ÌôúÏÑ±Ìôî
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ATR ÏäπÏàò</label>
                        <input type="number" class="form-input" id="trailing_stop_atr_multiplier" value="2.0" step="0.1">
                    </div>
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="enable_kelly_criterion">
                            ÏºàÎ¶¨ Î∞∞ÌåÖ ÏûêÍ∏à Í¥ÄÎ¶¨
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ÏºàÎ¶¨ ÎπÑÏú® (Î≥¥ÏàòÏ†Å)</label>
                        <input type="number" class="form-input" id="kelly_fraction" value="0.5" step="0.1" max="1">
                    </div>
                </div>
            </div>
        </div>

        <!-- Ï†ÑÎûµ ÏÑ§Ï†ï -->
        <div id="panel-strategies" class="settings-panel">
            <div class="settings-section">
                <div class="section-title">Î™®Î©òÌÖÄ Ï†ÑÎûµ</div>
                <div class="grid-2">
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="momentum_enabled" checked>
                            ÌôúÏÑ±Ìôî
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Îã®Í∏∞ Ïù¥ÎèôÌèâÍ∑† Í∏∞Í∞Ñ</label>
                        <input type="number" class="form-input" id="momentum_short_ma" value="5">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Ïû•Í∏∞ Ïù¥ÎèôÌèâÍ∑† Í∏∞Í∞Ñ</label>
                        <input type="number" class="form-input" id="momentum_long_ma" value="20">
                    </div>
                    <div class="form-group">
                        <label class="form-label">RSI Í∏∞Í∞Ñ</label>
                        <input type="number" class="form-input" id="momentum_rsi_period" value="14">
                    </div>
                </div>
            </div>

            <div class="settings-section">
                <div class="section-title">Î≥ÄÎèôÏÑ± ÎèåÌåå Ï†ÑÎûµ</div>
                <div class="grid-2">
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="vb_enabled" checked>
                            ÌôúÏÑ±Ìôî
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label">K Í∞í (Î≥ÄÎèôÌè≠ ÏäπÏàò)</label>
                        <input type="number" class="form-input" id="vb_k_value" value="0.5" step="0.1">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ÏßÑÏûÖ ÏãúÍ∞Å</label>
                        <input type="time" class="form-input" id="vb_entry_time" value="09:05">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Ï≤≠ÏÇ∞ ÏãúÍ∞Å</label>
                        <input type="time" class="form-input" id="vb_exit_time" value="15:15">
                    </div>
                </div>
            </div>

            <div class="settings-section">
                <div class="section-title">ÌéòÏñ¥ Ìä∏Î†àÏù¥Îî©</div>
                <div class="grid-2">
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="pairs_enabled">
                            ÌôúÏÑ±Ìôî
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Ïä§ÌîÑÎ†àÎìú ÏûÑÍ≥ÑÍ∞í (ÌëúÏ§ÄÌé∏Ï∞®)</label>
                        <input type="number" class="form-input" id="pairs_spread_threshold" value="2.0" step="0.1">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Î°§Î∞± Í∏∞Í∞Ñ (Ïùº)</label>
                        <input type="number" class="form-input" id="pairs_lookback_period" value="60">
                    </div>
                </div>
            </div>
        </div>

        <!-- AI Î∂ÑÏÑù ÏÑ§Ï†ï -->
        <div id="panel-ai" class="settings-panel">
            <div class="settings-section">
                <div class="section-title">AI Î∂ÑÏÑù ÏÑ§Ï†ï</div>
                <div class="grid-2">
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="ai_enabled" checked>
                            AI Î∂ÑÏÑù ÌôúÏÑ±Ìôî
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Í∏∞Î≥∏ Î∂ÑÏÑùÍ∏∞</label>
                        <select class="form-select" id="ai_default_analyzer">
                            <option value="gemini" selected>Gemini</option>
                            <option value="gpt4">GPT-4</option>
                            <option value="claude">Claude</option>
                            <option value="ensemble">Ensemble</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ÏµúÏÜå Ïã†Î¢∞ÎèÑ Ï†êÏàò</label>
                        <input type="number" class="form-input" id="ai_min_confidence" value="0.7" step="0.1" min="0" max="1">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ÌÉÄÏûÑÏïÑÏõÉ (Ï¥à)</label>
                        <input type="number" class="form-input" id="ai_timeout" value="30">
                    </div>
                </div>
            </div>

            <div class="settings-section">
                <div class="section-title">ÏãúÏû• Î†àÏßê Î∂ÑÎ•ò</div>
                <div class="grid-2">
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="market_regime_enabled" checked>
                            ÌôúÏÑ±Ìôî
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ÏóÖÎç∞Ïù¥Ìä∏ Ï£ºÍ∏∞ (ÏãúÍ∞Ñ)</label>
                        <input type="number" class="form-input" id="market_regime_interval" value="4">
                    </div>
                </div>
            </div>

            <div class="settings-section">
                <div class="section-title">Ïù¥ÏÉÅ Í∞êÏßÄ</div>
                <div class="grid-2">
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="anomaly_enabled" checked>
                            ÌôúÏÑ±Ìôî
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ÌôïÏù∏ Ï£ºÍ∏∞ (Î∂Ñ)</label>
                        <input type="number" class="form-input" id="anomaly_check_interval" value="5">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ÏïåÎ¶º ÏûÑÍ≥ÑÍ∞í</label>
                        <input type="number" class="form-input" id="anomaly_alert_threshold" value="0.8" step="0.1" min="0" max="1">
                    </div>
                </div>
            </div>
        </div>

        <!-- Î∞±ÌÖåÏä§ÌåÖ ÏÑ§Ï†ï -->
        <div id="panel-backtest" class="settings-panel">
            <div class="settings-section">
                <div class="section-title">Î∞±ÌÖåÏä§ÌåÖ ÏÑ§Ï†ï</div>
                <div class="grid-2">
                    <div class="form-group">
                        <label class="form-label">Ï¥àÍ∏∞ ÏûêÎ≥∏Í∏à (Ïõê)</label>
                        <input type="number" class="form-input" id="backtest_initial_capital" value="10000000" step="1000000">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ÏàòÏàòÎ£åÏú® (%)</label>
                        <input type="number" class="form-input" id="backtest_commission_rate" value="0.015" step="0.001">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Ïä¨Î¶¨ÌîºÏßÄ (%)</label>
                        <input type="number" class="form-input" id="backtest_slippage_pct" value="0.05" step="0.01">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Î¶¨Ìè¨Ìä∏ ÌòïÏãù</label>
                        <select class="form-select" id="backtest_report_format">
                            <option value="html" selected>HTML</option>
                            <option value="pdf">PDF</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="settings-section">
                <div class="section-title">ÌååÎùºÎØ∏ÌÑ∞ ÏµúÏ†ÅÌôî</div>
                <div class="grid-2">
                    <div class="form-group">
                        <label class="form-label">ÏµúÏ†ÅÌôî Î∞©Î≤ï</label>
                        <select class="form-select" id="optimization_method">
                            <option value="grid">Grid Search</option>
                            <option value="random">Random Search</option>
                            <option value="bayesian" selected>Bayesian Optimization</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ÏãúÎèÑ ÌöüÏàò</label>
                        <input type="number" class="form-input" id="optimization_n_trials" value="50">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Î™©Ìëú ÏßÄÌëú</label>
                        <select class="form-select" id="optimization_objective">
                            <option value="sharpe_ratio" selected>Sharpe Ratio</option>
                            <option value="total_return">Ï¥ù ÏàòÏùµÎ•†</option>
                            <option value="max_drawdown">Max Drawdown</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <!-- ÏïåÎ¶º ÏÑ§Ï†ï -->
        <div id="panel-notification" class="settings-panel">
            <div class="settings-section">
                <div class="section-title">ÏïåÎ¶º Ï±ÑÎÑê</div>
                <div class="grid-2">
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="notif_enabled" checked>
                            ÏïåÎ¶º ÌôúÏÑ±Ìôî
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="notif_web_push" checked>
                            Ïõπ Î∏åÎùºÏö∞Ï†Ä PUSH
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="notif_email">
                            Ïù¥Î©îÏùº
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="notif_telegram">
                            ÌÖîÎ†àÍ∑∏Îû®
                        </label>
                    </div>
                </div>
            </div>

            <div class="settings-section">
                <div class="section-title">ÏïåÎ¶º Ïù¥Î≤§Ìä∏</div>
                <div class="grid-2">
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="notif_order_executed" checked>
                            Ï£ºÎ¨∏ Ï≤¥Í≤∞
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="notif_ai_signal" checked>
                            AI Îß§Îß§ Ïã†Ìò∏
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="notif_stop_loss" checked>
                            ÏÜêÏ†à Î∞úÎèô
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="notif_system_error" checked>
                            ÏãúÏä§ÌÖú Ïò§Î•ò
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- UI ÏÑ§Ï†ï -->
        <div id="panel-ui" class="settings-panel">
            <div class="settings-section">
                <div class="section-title">UI ÏÑ§Ï†ï</div>
                <div class="grid-2">
                    <div class="form-group">
                        <label class="form-label">ÌÖåÎßà</label>
                        <select class="form-select" id="ui_theme">
                            <option value="light" selected>ÎùºÏù¥Ìä∏</option>
                            <option value="dark">Îã§ÌÅ¨</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Ïñ∏Ïñ¥</label>
                        <select class="form-select" id="ui_language">
                            <option value="ko" selected>ÌïúÍµ≠Ïñ¥</option>
                            <option value="en">English</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ÏÉàÎ°úÍ≥†Ïπ® Ï£ºÍ∏∞ (Ï¥à)</label>
                        <input type="number" class="form-input" id="ui_refresh_interval" value="5">
                    </div>
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="ui_show_guide" checked>
                            Í∞ÄÏù¥Îìú Ìà¨Ïñ¥ ÌëúÏãú
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Î≤ÑÌäº Í∑∏Î£π -->
        <div class="btn-group">
            <button class="btn btn-primary" onclick="saveSettings()">üíæ Ï†ÄÏû•</button>
            <button class="btn btn-success" onclick="applySettings()">‚úÖ Ï†ÅÏö©</button>
            <button class="btn btn-danger" onclick="resetSettings()">üîÑ Í∏∞Î≥∏Í∞í Î≥µÏõê</button>
        </div>
    </div>

    <script>
        // ÌÉ≠ Ï†ÑÌôò
        function switchTab(tabName) {
            // Î™®Îì† ÌÉ≠ ÎπÑÌôúÏÑ±Ìôî
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.settings-panel').forEach(panel => panel.classList.remove('active'));

            // ÏÑ†ÌÉùÌïú ÌÉ≠ ÌôúÏÑ±Ìôî
            event.target.classList.add('active');
            document.getElementById('panel-' + tabName).classList.add('active');
        }

        // ÌÖåÎßà ÌÜ†Í∏Ä
        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            const btn = document.querySelector('.theme-toggle');
            if (document.body.classList.contains('dark-mode')) {
                btn.textContent = '‚òÄÔ∏è ÎùºÏù¥Ìä∏ Î™®Îìú';
            } else {
                btn.textContent = 'üåô Îã§ÌÅ¨ Î™®Îìú';
            }
        }

        // ÏÑ§Ï†ï Ï†ÄÏû•
        async function saveSettings() {
            const settings = collectSettings();

            try {
                const response = await fetch('/api/settings', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(settings)
                });

                if (response.ok) {
                    showAlert('success', 'ÏÑ§Ï†ïÏù¥ Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§.');
                } else {
                    showAlert('error', 'ÏÑ§Ï†ï Ï†ÄÏû• Ïã§Ìå®');
                }
            } catch (error) {
                showAlert('error', 'ÎÑ§Ìä∏ÏõåÌÅ¨ Ïò§Î•ò: ' + error.message);
            }
        }

        // ÏÑ§Ï†ï Ï†ÅÏö©
        async function applySettings() {
            await saveSettings();
            setTimeout(() => {
                window.location.reload();
            }, 1000);
        }

        // Í∏∞Î≥∏Í∞í Î≥µÏõê
        async function resetSettings() {
            if (!confirm('Î™®Îì† ÏÑ§Ï†ïÏùÑ Í∏∞Î≥∏Í∞íÏúºÎ°ú Î≥µÏõêÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) {
                return;
            }

            try {
                const response = await fetch('/api/settings/reset', {method: 'POST'});
                if (response.ok) {
                    showAlert('success', 'Í∏∞Î≥∏Í∞íÏúºÎ°ú Î≥µÏõêÎêòÏóàÏäµÎãàÎã§.');
                    setTimeout(() => window.location.reload(), 1500);
                }
            } catch (error) {
                showAlert('error', 'Î≥µÏõê Ïã§Ìå®: ' + error.message);
            }
        }

        // ÏÑ§Ï†ï ÏàòÏßë
        function collectSettings() {
            // Î™®Îì† ÏûÖÎ†• ÌïÑÎìúÏóêÏÑú ÏÑ§Ï†ï ÏàòÏßë
            const settings = {};
            document.querySelectorAll('.form-input, .form-select, .form-checkbox').forEach(el => {
                if (el.type === 'checkbox') {
                    settings[el.id] = el.checked;
                } else if (el.type === 'number') {
                    settings[el.id] = parseFloat(el.value);
                } else {
                    settings[el.id] = el.value;
                }
            });
            return settings;
        }

        // ÏïåÎ¶º ÌëúÏãú
        function showAlert(type, message) {
            const successAlert = document.getElementById('success-alert');
            const errorAlert = document.getElementById('error-alert');

            if (type === 'success') {
                successAlert.classList.add('show');
                setTimeout(() => successAlert.classList.remove('show'), 3000);
            } else {
                document.getElementById('error-message').textContent = message;
                errorAlert.classList.add('show');
                setTimeout(() => errorAlert.classList.remove('show'), 5000);
            }
        }

        // ÏÑ§Ï†ï Î°úÎìú
        async function loadSettings() {
            try {
                const response = await fetch('/api/settings');
                const settings = await response.json();

                // ÏÑ§Ï†ï Í∞í Ï†ÅÏö©
                for (const [key, value] of Object.entries(settings)) {
                    const el = document.getElementById(key);
                    if (el) {
                        if (el.type === 'checkbox') {
                            el.checked = value;
                        } else {
                            el.value = value;
                        }
                    }
                }
            } catch (error) {
                console.error('ÏÑ§Ï†ï Î°úÎìú Ïã§Ìå®:', error);
            }
        }

        // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú ÏÑ§Ï†ï Î°úÎìú
        window.addEventListener('DOMContentLoaded', loadSettings);
    </script>
</body>
</html>
