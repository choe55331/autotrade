# 🔥 긴급 수정 가이드

## 문제 상황
config.yaml은 올바르게 수정되었지만 (min_value=50, min_net_buy=100000),
디버그 로그에서는 여전히 예전 값(120, 5000000)을 로드하고 있습니다.

## 근본 원인
ConfigManager가 프로그램 시작 시 한 번만 config를 로드하고 캐싱합니다.
main.py가 재시작되지 않으면 예전 값을 계속 사용합니다.

## ✅ 해결 방법

### 1단계: main.py 완전 재시작 (필수!)

```bash
# Ctrl+C를 눌러 main.py 완전 종료
# 그리고 재시작
python main.py
```

### 2단계: 디버그 로그 확인

재시작 후 로그에서 다음을 확인하세요:

```
[DEBUG 체결강도] XXX: min_value=50  ✅
[DEBUG 프로그램] XXX: min_net_buy=100000  ✅
```

만약 여전히 120, 5000000이 나온다면:

```bash
# config.yaml 확인
cat config/config.yaml | grep -A2 "execution_intensity:"
cat config/config.yaml | grep -A2 "program_trading:"

# 출력이 다음과 같아야 함:
# execution_intensity:
#   weight: 40
#   min_value: 50

# program_trading:
#   weight: 40
#   min_net_buy: 100000
```

### 3단계: 여전히 안 된다면

scoring_system.py가 이미 기본값 50, 100000으로 수정되어 있습니다.
config가 로드되지 않더라도 기본값이 적용됩니다.

---

## 📊 예상 결과 (재시작 후)

```
삼익제약 - 157점 (36%)
상세: 거래량:48/60, 가격:33/60, 기관:10/60,
      호가:20/40,     # ✅ 0 → 20 (호가비율에 따라)
      체결:20/40,     # ✅ 0 → 20 (체결강도 79 → 50 이상)
      증권사:0/40,    # 데이터 없음 (정상)
      프로그램:0/40,  # 10만원 미만 (정상)
      기술:26/40, 테마:0/40, 변동성:0/20
```

---

## 🔍 증권사 "순매수 없음" 설명

이것은 **정상**입니다. 5개 주요 증권사(한국투자, 미래에셋, NH투자, 삼성, 신한)가
**모두 순매도하거나 거래가 없을 때** 나타납니다.

테스트에서는 API가 작동하는지만 확인했고,
실제 시장에서는 모든 종목에 증권사 순매수가 있는 것이 아닙니다.

---

## 📱 대시보드 분봉 문제

대시보드 코드는 이미 분봉을 지원합니다.
"데이터 변환 실패"가 뜨는 이유는:

1. 장외 시간 (09:00-15:30 외)
2. 주말/공휴일
3. 해당 종목에 분봉 데이터 없음

**해결**: 장중에 테스트하거나, 일봉(D)을 사용하세요.

---

## 🎯 최종 체크리스트

- [ ] main.py 완전 재시작
- [ ] 디버그 로그에서 min_value=50 확인
- [ ] 디버그 로그에서 min_net_buy=100000 확인
- [ ] 체결:20/40, 호가:20/40 점수 확인
- [ ] 대시보드 재시작 (디버그 로그 제거 적용)

---

**문제 지속 시**: 디버그 로그 전체를 캡처해서 보여주세요.
