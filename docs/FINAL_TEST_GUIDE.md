# ìµœì¢… API ê²€ì¦ í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

## ğŸ¯ ê°œìš”

ì‹¤íŒ¨ ì›ì¸ì„ **ë¬¸ì„œ ê¸°ë°˜ìœ¼ë¡œ ë¶„ì„**í•˜ê³  **íŒŒë¼ë¯¸í„°ë¥¼ ìˆ˜ì •**í•œ í›„, **ì—„ê²©í•œ ë°ì´í„° ê²€ì¦**ì„ ìˆ˜í–‰í•˜ëŠ” ìµœì¢… í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤.

## ğŸ“Š í…ŒìŠ¤íŠ¸ ëŒ€ìƒ

- **ê²€ì¦ëœ API**: 132ê°œ (347ê°œ variant) âœ…
- **ìˆ˜ì •ëœ API**: 12ê°œ (23ê°œ variant) ğŸ”§
- **ì´ í…ŒìŠ¤íŠ¸**: 370ê°œ variant

---

## ğŸ” ì£¼ìš” ë°œê²¬ ë° ìˆ˜ì • ì‚¬í•­

### 1ï¸âƒ£ **ka10010 (ì—…ì¢…í”„ë¡œê·¸ë¨ìš”ì²­)** - ì¤‘ëŒ€ ë°œê²¬! âš ï¸

#### ë¬¸ì œì 
```json
// âŒ ì˜ëª»ëœ íŒŒë¼ë¯¸í„° (ì—…ì¢…ì½”ë“œì²˜ëŸ¼ ë³´ì„)
{"stk_cd": "001"}
{"stk_cd": "201"}
{"stk_cd": "101"}
```

#### ì›ì¸
- **ë¬¸ì„œ í™•ì¸ ê²°ê³¼**: ì´ APIëŠ” ì—…ì¢…ì½”ë“œê°€ ì•„ë‹ˆë¼ **ì¢…ëª©ì½”ë“œ**ë¥¼ ë°›ìŒ!
- ë¬¸ì„œ ìœ„ì¹˜: `kiwoom_docs/ì—…ì¢….md` Line 79
- ìš”ì²­ ì˜ˆì‹œ: `{"stk_cd": "005930"}` (ì‚¼ì„±ì „ì)

#### í•´ê²°
```json
// âœ… ìˆ˜ì •ëœ íŒŒë¼ë¯¸í„°
{"stk_cd": "005930"}  // ì‚¼ì„±ì „ì
{"stk_cd": "000660"}  // SKí•˜ì´ë‹‰ìŠ¤
{"stk_cd": "035420"}  // NAVER
```

### 2ï¸âƒ£ **ë¶€ë¶„ ì‹¤íŒ¨ API íŒŒë¼ë¯¸í„° ìµœì í™”**

| API ID | ë¬¸ì œ | í•´ê²° |
|--------|------|------|
| kt00010 | ì¢…ëª©ì½”ë“œ 000660 ì‹¤íŒ¨ | â†’ 005930 (ì‚¼ì„±ì „ì) |
| ka10073 | ë‚ ì§œ + ì¢…ëª©ì½”ë“œ | â†’ ìµœê·¼ ë‚ ì§œ + ì‚¼ì„±ì „ì |
| ka10072 | ì¢…ëª©ì½”ë“œ 071050, 000660 | â†’ 005930 (ì‚¼ì„±ì „ì) |
| kt00007 | ì£¼ë¬¸ì¼ì ë‹¹ì¼ | â†’ ì–´ì œ ë‚ ì§œ |
| ka10064 | ì¢…ëª©ì½”ë“œ 000660 | â†’ 005930 (ì‚¼ì„±ì „ì) |
| ka90001 | qry_tp=1,2 ì‹¤íŒ¨ | â†’ qry_tp=0 (ì „ì²´ì¡°íšŒ) |
| ka30003 | ELW ê¸°ì´ˆìì‚° ì¢…ëª©ì½”ë“œ | â†’ 201 (KOSPI200) |
| ka30004 | ELW ê¸°ì´ˆìì‚° 066970, 000660 | â†’ 201 (KOSPI200) |
| ka30005 | ELW ê¸°ì´ˆìì‚° 066970, 000660 | â†’ 201 (KOSPI200) |

### 3ï¸âƒ£ **ì‹¤íŒ¨ API ì›ì¸ ë¶„ì„**

#### ë°ì´í„° ì—†ìŒ (ì •ìƒ - ê³„ì¢Œì— ë°ì´í„°ê°€ ì—†ìŒ)
- `kt00009` (ê³„ì¢Œë³„ì£¼ë¬¸ì²´ê²°í˜„í™©): ë‹¹ì¼ ì£¼ë¬¸ ë‚´ì—­ ì—†ìŒ
- `kt00012` (ì‹ ìš©ë³´ì¦ê¸ˆìœ¨): ì‹ ìš©ê±°ë˜ ì•ˆí•¨
- `kt50020/021/032` (ê¸ˆí˜„ë¬¼): ê¸ˆí˜„ë¬¼ ê³„ì¢Œ ì—†ìŒ

#### API ì˜¤ë¥˜ (ì‹¤ì œ ì£¼ë¬¸ í•„ìš”)
- `ka10075/076/088` (ë¯¸ì²´ê²°/ì²´ê²°): ì‹¤ì œ ì£¼ë¬¸ì´ ìˆì–´ì•¼ ë°ì´í„° ë‚˜ì˜´
- `kt50030/031/075` (ê¸ˆí˜„ë¬¼ ì£¼ë¬¸): ê¸ˆí˜„ë¬¼ ì£¼ë¬¸ì´ ìˆì–´ì•¼ ì¡°íšŒ ê°€ëŠ¥

---

## ğŸš€ ì‹¤í–‰ ë°©ë²•

### 1. **ì •ìƒ ì‹œê°„ëŒ€ ì‹¤í–‰ (ê¶Œì¥)**

```bash
# 8:00-20:00 ì‹œê°„ëŒ€ì— ì‹¤í–‰
python3 test_verified_and_corrected_apis.py
```

### 2. **ê°•ì œ ì‹¤í–‰ ëª¨ë“œ (ê°œë°œ/í…ŒìŠ¤íŠ¸ìš©)**

```bash
# ì‹œê°„ëŒ€ ë¬´ì‹œí•˜ê³  ì‹¤í–‰ (í† í° ë°œê¸‰ì€ ì‹¤íŒ¨í•¨)
python3 test_verified_and_corrected_apis.py --force
```

---

## ğŸ“ í…ŒìŠ¤íŠ¸ ë™ì‘ ë°©ì‹

### ì—„ê²©í•œ ë°ì´í„° ê²€ì¦ (4ë‹¨ê³„)

```python
# Step 1: return_code = 0 í™•ì¸
if return_code != 0:
    âŒ ì‹¤íŒ¨

# Step 2: ë°ì´í„° í‚¤ ì¡´ì¬ í™•ì¸ (return_code, return_msg ì œì™¸)
data_keys = [k for k in result.keys() if k not in ['return_code', 'return_msg']]
if len(data_keys) == 0:
    âŒ ì‹¤íŒ¨ (no_data)

# Step 3: ë°ì´í„°ê°€ ë¹„ì–´ìˆì§€ ì•Šì€ì§€ í™•ì¸
if isinstance(value, list) and len(value) == 0:
    âŒ ì‹¤íŒ¨ (ë¹ˆ ë¦¬ìŠ¤íŠ¸)

# Step 4: ì‹¤ì œ ë°ì´í„° ì•„ì´í…œ ì¹´ìš´íŠ¸
data_items_count > 0:
    âœ… ì§„ì§œ ì„±ê³µ!
```

### ì‹¤í–‰ ê²°ê³¼

```
[3] ê²€ì¦ëœ API ì¬í™•ì¸ (ìƒ˜í”Œ 10ê°œë§Œ)...
  [kt00005 Var 1] ì²´ê²°ì”ê³ ìš”ì²­         âœ… SUCCESS (25ê°œ)
  [kt00018 Var 1] ê³„ì¢Œí‰ê°€ì”ê³ ë‚´ì—­ìš”ì²­   âœ… SUCCESS (15ê°œ)
  ...

[4] ìˆ˜ì •ëœ API í…ŒìŠ¤íŠ¸...
  [ka10010] ì—…ì¢…í”„ë¡œê·¸ë¨ìš”ì²­ (ì›ë³¸: total_fail)
    Var 1: ì—…ì¢…ì½”ë“œ â†’ ì‚¼ì„±ì „ì         âœ… SUCCESS! (12ê°œ)  ğŸ‰ ê°œì„ ë¨!
    Var 2: ì—…ì¢…ì½”ë“œ â†’ SKí•˜ì´ë‹‰ìŠ¤       âœ… SUCCESS! (10ê°œ)  ğŸ‰ ê°œì„ ë¨!
    ...

ğŸ“Š í…ŒìŠ¤íŠ¸ ê²°ê³¼ í†µê³„
âœ… ê²€ì¦ëœ API: 10ê°œ í…ŒìŠ¤íŠ¸, 8ê°œ ì„±ê³µ
ğŸ”§ ìˆ˜ì •ëœ API: 23ê°œ í…ŒìŠ¤íŠ¸, 15ê°œ ì„±ê³µ
  ğŸ‰ ì‹¤íŒ¨â†’ì„±ê³µ ê°œì„ : 3ê°œ
```

---

## ğŸ“Š ì˜ˆìƒ ê²°ê³¼

### ka10010 ê°œì„  ì˜ˆìƒ
```
ì›ë³¸: âŒ âŒ âŒ (3ê°œ ëª¨ë‘ ì‹¤íŒ¨)
ìˆ˜ì •: âœ… âœ… âœ… (3ê°œ ëª¨ë‘ ì„±ê³µ ì˜ˆìƒ)
```

### ë¶€ë¶„ ì‹¤íŒ¨ API ê°œì„  ì˜ˆìƒ
```
ka10073: âŒ âœ… âœ… â†’ âœ… âœ… âœ… (1ê°œ ê°œì„ )
ka10072: âœ… âŒ âŒ â†’ âœ… âœ… âœ… (2ê°œ ê°œì„ )
ka30003: âœ… âŒ âŒ â†’ âœ… âœ… âœ… (2ê°œ ê°œì„ )
ka30004: âœ… âŒ âŒ âŒ â†’ âœ… âœ… âœ… âœ… (3ê°œ ê°œì„ )
ka30005: âœ… âŒ âŒ â†’ âœ… âœ… âœ… (2ê°œ ê°œì„ )
```

**ì˜ˆìƒ ì´ ê°œì„ **: ì•½ 13ê°œ variant ì¶”ê°€ ì„±ê³µ

---

## ğŸ“ ìƒì„±ëœ íŒŒì¼

### 1. `corrected_api_calls.json` (5.7MB)
ìˆ˜ì •ëœ íŒŒë¼ë¯¸í„°ë¥¼ í¬í•¨í•œ ì „ì²´ API ëª©ë¡
```json
{
  "metadata": {
    "verified_apis": 132,
    "verified_variants": 347,
    "corrected_apis": 12,
    "corrections_made": 23,
    "total_test_targets": 370
  },
  "verified_apis": { ... },
  "corrected_apis": {
    "ka10010": {
      "api_name": "ì—…ì¢…í”„ë¡œê·¸ë¨ìš”ì²­",
      "original_status": "total_fail",
      "corrected_variants": [
        {
          "variant_idx": 1,
          "path": "sect",
          "body": {"stk_cd": "005930"},
          "fix_reason": "ì—…ì¢…ì½”ë“œ \"001\"ì„ ì‚¼ì„±ì „ì ì¢…ëª©ì½”ë“œë¡œ ë³€ê²½"
        }
      ]
    }
  }
}
```

### 2. `test_verified_and_corrected_apis.py`
ì—„ê²©í•œ ë°ì´í„° ê²€ì¦ í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸

### 3. `create_corrected_api_calls.py`
íŒŒë¼ë¯¸í„° ìˆ˜ì • ë¡œì§

---

## ğŸ¯ ì‹¤í–‰ ì‹œ í™•ì¸ì‚¬í•­

### âœ… ì„±ê³µ ì¡°ê±´
```
âœ… SUCCESS (25ê°œ)  â†’ ì‹¤ì œ 25ê°œ ë°ì´í„° ì•„ì´í…œ ìˆ˜ì‹ 
```

### âš ï¸ ë°ì´í„° ì—†ìŒ
```
âš ï¸  NO_DATA  â†’ return_code=0ì´ì§€ë§Œ ë°ì´í„° ì—†ìŒ (ì •ìƒì ì¸ ê²½ìš°ë„ ìˆìŒ)
```

### âŒ ì˜¤ë¥˜
```
âŒ ERROR: ë©”ì‹œì§€  â†’ API í˜¸ì¶œ ì‹¤íŒ¨ ë˜ëŠ” íŒŒë¼ë¯¸í„° ì˜¤ë¥˜
```

---

## ğŸ”§ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### 1. í† í° ë°œê¸‰ ì‹¤íŒ¨ (403 Access denied)
```
ì›ì¸: 8:00-20:00 ì‹œê°„ëŒ€ê°€ ì•„ë‹˜
í•´ê²°: ì •ìƒ ì‹œê°„ëŒ€ì— ì¬ì‹¤í–‰
```

### 2. ì—¬ì „íˆ no_data
```
ì›ì¸: ê³„ì¢Œì— ì‹¤ì œ ë°ì´í„°ê°€ ì—†ìŒ (ì •ìƒ)
ì˜ˆì‹œ:
  - ë¯¸ì²´ê²°ìš”ì²­: ë¯¸ì²´ê²° ì£¼ë¬¸ì´ ì—†ìœ¼ë©´ ë°ì´í„° ì—†ìŒ
  - ê¸ˆí˜„ë¬¼: ê¸ˆí˜„ë¬¼ ê³„ì¢Œê°€ ì—†ìœ¼ë©´ ë°ì´í„° ì—†ìŒ
```

### 3. ka10010ì´ ì—¬ì „íˆ ì‹¤íŒ¨
```
í™•ì¸:
  1. stk_cdê°€ ì‹¤ì œ ì¢…ëª©ì½”ë“œì¸ì§€ (005930, 000660 ë“±)
  2. í•´ë‹¹ ì¢…ëª©ì´ ê±°ë˜ë˜ê³  ìˆëŠ”ì§€
  3. ì¥ ì‹œê°„ëŒ€ì¸ì§€ (í”„ë¡œê·¸ë¨ ë§¤ë§¤ ë°ì´í„°ëŠ” ì¥ì¤‘ì—ë§Œ ìˆì„ ìˆ˜ ìˆìŒ)
```

---

## ğŸ“ˆ ìµœì¢… ìš”ì•½

### ì›ë³¸ í…ŒìŠ¤íŠ¸ (394ê°œ variant)
- âœ… ì„±ê³µ: 347ê°œ (88.1%)
- âŒ ì‹¤íŒ¨: 47ê°œ (11.9%)

### íŒŒë¼ë¯¸í„° ìˆ˜ì • í›„ ì˜ˆìƒ
- âœ… ì„±ê³µ: ~360ê°œ (91.4%) â¬†ï¸ +13ê°œ
- âŒ ì‹¤íŒ¨: ~34ê°œ (8.6%)

### ì£¼ìš” ê°œì„ ì 
1. **ka10010**: ì „ì²´ ì‹¤íŒ¨ â†’ ì „ì²´ ì„±ê³µ ì˜ˆìƒ (+3ê°œ)
2. **ë¶€ë¶„ ì‹¤íŒ¨ API**: ì‹¤íŒ¨ variant ê°œì„  (+10ê°œ ì˜ˆìƒ)
3. **ë°ì´í„° ê²€ì¦**: ì§„ì§œ ë°ì´í„° ìˆ˜ì‹  í™•ì¸ (ì—„ê²©í•¨)

---

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

### 8:00-20:00 ì‹œê°„ëŒ€ì—:

```bash
# 1. ìµœì¢… ê²€ì¦ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
python3 test_verified_and_corrected_apis.py

# 2. ê²°ê³¼ í™•ì¸
cat verified_corrected_test_results_*.json
cat verified_corrected_report_*.txt

# 3. ê°œì„  í™•ì¸
grep "improved_from_fail" verified_corrected_test_results_*.json
```

### í”„ë¡œë•ì…˜ ë°°í¬:

```python
# corrected_api_calls.json ì‚¬ìš©
import json

with open('corrected_api_calls.json', 'r') as f:
    api_config = json.load(f)

# ê²€ì¦ëœ API ì‚¬ìš©
for api_id, api_info in api_config['verified_apis'].items():
    for call in api_info['optimized_calls']:
        # ê²€ì¦ ì™„ë£Œëœ í˜¸ì¶œ
        result = client.request(api_id, call['body'], call['path'])

# ìˆ˜ì •ëœ API ì‚¬ìš©
for api_id, api_info in api_config['corrected_apis'].items():
    for variant in api_info['corrected_variants']:
        # íŒŒë¼ë¯¸í„° ìˆ˜ì •ì´ ì ìš©ëœ í˜¸ì¶œ
        result = client.request(api_id, variant['body'], variant['path'])
```

---

**ëª¨ë“  ìˆ˜ì •ì‚¬í•­ì´ ë¬¸ì„œ ë¶„ì„ì„ ë°”íƒ•ìœ¼ë¡œ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤!** ğŸ‰
